<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Placement Details</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f6f9;
      color: #333;
      padding-top: 70px;
    }

    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 5%;
      background-color: white;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      color: #27ae60;
    }

    .nav-links {
      list-style: none;
      display: flex;
      gap: 30px;
      margin-right: 8%;
    }

    .nav-links li {
      display: inline;
    }

    .nav-links a {
      text-decoration: none;
      color: black;
      font-size: 16px;
      font-weight: 500;
    }

    .active {
      color: #27ae60;
    }

    .profile-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-color: #ccc;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-left: 20px;
      cursor: pointer;
    }

    .container {
      width: 90%;
      max-width: 1000px;
      margin: 30px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      color: #1f2d3d;
      margin-bottom: 25px;
    }

    .entry {
      border: 1px solid #ddd;
      padding: 20px;
      margin-bottom: 15px;
      border-radius: 8px;
      background-color: #fafafa;
    }

    .entry label {
      display: block;
      margin: 12px 0 4px;
      font-weight: 500;
    }

    .entry input[type="text"],
    .entry input[type="date"],
    .entry select {
      width: 100%;
      padding: 8px;
      font-size: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }

    .entry input[type="file"] {
      margin-top: 5px;
    }

    button {
      background-color: #007bff;
      color: white;
      padding: 10px 18px;
      border: none;
      border-radius: 5px;
      font-size: 15px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #007bff;
    }

    .navigation-buttons {
      text-align: center;
      margin-top: 20px;
    }

.navigation-buttons {
  display: flex;
  gap: 20px;
  margin-top: 30px; /* Optional: spacing above the buttons */
  justify-content: space-evenlyw;
}

.navigation-buttons button {
    padding: 10px 20px;
    font-size: 16px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s;
    min-width: 90px;
    height: 40px;
    justify-content: space-between;
}


    @media screen and (max-width: 600px) {
      .entry label, .entry input, .entry select {
        font-size: 14px;
      }
    }

    .file-preview button {
      margin-right: 10px;
      padding: 5px 10px;
      font-size: 12px;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      color: white;
    }

    .file-preview .view-btn {
      background-color: #28a745;
    }

    .file-preview .remove-btn {
      background-color: #dc3545;
    }
  </style>
</head>
<body>

  <!-- NAVIGATION BAR -->
  <nav class="navbar">
    <div class="logo">StudentSys</div>
    <ul class="nav-links">
      <li><a href="Home.html" class="active">Home</a></li>
      <li><a href="about.html" class="active">About Us</a></li>
      <li><a href="student-dashboard.html">Services</a></li>
      <li><a href="contact.html" class="active">Contact Us</a></li>
      <li>
        <div class="profile-icon" onclick="location.href=''">U</div>
      </li>
    </ul>
  </nav>

  <!-- PLACEMENT FORM SECTION -->
  <div class="container">
    <h1>Placement Details</h1>
    <form id="placementForm" enctype="multipart/form-data">
      <input type="hidden" name="studentId" value="662c12345ab67890cdfe4321">
      <div class="entry">
        <label>Company Name:
          <input type="text" name="companyName[]" placeholder="Enter company name">
        </label>
        <label>Job Role:
          <input type="text" name="jobRole[]" placeholder="Enter job role">
        </label>
        <label>Joining Date:
          <input type="date" name="placementDate[]">
        </label>
        <label>Status:
          <select name="status[]">
            <option value="Completed">Completed</option>
            <option value="Ongoing">Ongoing</option>
            <option value="Not Joined Yet">Not Joined Yet</option>
          </select>
        </label>
        <label>Package:
          <input type="text" name="package[]" placeholder="Enter package (e.g. 10 LPA)">
        </label>
        <label>Offer Letter:
          <input type="file" name="offerLetter[]" onchange="handleFileChange(this)">
          <div class="file-preview"></div>
        </label>
        <label>Joining Letter:
          <input type="file" name="joiningLetter[]" onchange="handleFileChange(this)">
          <div class="file-preview"></div>
        </label>
      </div>
      <button type="button" onclick="addPlacement()">Add Placement</button>
    </form>

    <div class="navigation-buttons">
      <button class="nav-btn back-btn" onclick="window.location.href='payment.html'">← Back</button>
      <button class="next-btn" onclick="saveDocuments()">Save</button>
      <button class="next-btn" onclick="window.location.href='scholarshipinfo.html'">Next →</button>
    </div>
  </div>

  <script>
    function addPlacement() {
      const form = document.getElementById("placementForm");
      const firstEntry = document.querySelector(".entry");
      const newEntry = firstEntry.cloneNode(true);

      newEntry.querySelectorAll("input[type=text], input[type=date]").forEach(input => input.value = "");
      newEntry.querySelectorAll("select").forEach(select => select.selectedIndex = 0);
      newEntry.querySelectorAll("input[type=file]").forEach(fileInput => {
        fileInput.value = "";
        const preview = fileInput.nextElementSibling;
        if (preview) preview.innerHTML = "";
      });

      form.insertBefore(newEntry, form.querySelector("button[onclick='addPlacement()']"));
    }

    function saveDocuments() {
      const form = document.getElementById("placementForm");
      const entries = document.querySelectorAll(".entry");

      const formData = new FormData();
      const studentId = 'YOUR_STUDENT_ID'; // Replace dynamically as needed
      formData.append("studentId", studentId);

      entries.forEach(entry => {
        formData.append("companyName[]", entry.querySelector('input[name="companyName[]"]').value);
        formData.append("jobRole[]", entry.querySelector('input[name="jobRole[]"]').value);
        formData.append("placementDate[]", entry.querySelector('input[name="placementDate[]"]').value);
        formData.append("status[]", entry.querySelector('select[name="status[]"]').value);
        formData.append("package[]", entry.querySelector('input[name="package[]"]').value);

        const offerFile = entry.querySelector('input[name="offerLetter[]"]').files[0];
        const joiningFile = entry.querySelector('input[name="joiningLetter[]"]').files[0];
        if (offerFile) formData.append("offerLetter", offerFile);
        if (joiningFile) formData.append("joiningLetter", joiningFile);
      });

      fetch('/api/placement/upload', {
        method: 'POST',
        body: formData,
      })
      .then(res => res.json())
      .then(data => {
        alert("Placement data saved!");
        console.log(data);
      })
      .catch(err => {
        console.error("Error:", err);
        alert("Failed to save placement data.");
      });
    }

    function handleFileChange(inputElement) {
      const previewDiv = inputElement.nextElementSibling;
      previewDiv.innerHTML = "";

      if (inputElement.files.length > 0) {
        const file = inputElement.files[0];
        const fileURL = URL.createObjectURL(file);

        const viewBtn = document.createElement("button");
        viewBtn.textContent = "View";
        viewBtn.type = "button";
        viewBtn.classList.add("view-btn");
        viewBtn.onclick = () => window.open(fileURL, "_blank");

        const removeBtn = document.createElement("button");
        removeBtn.textContent = "Remove";
        removeBtn.type = "button";
        removeBtn.classList.add("remove-btn");
        removeBtn.onclick = () => {
          inputElement.value = "";
          previewDiv.innerHTML = "";
          URL.revokeObjectURL(fileURL);
        };

        previewDiv.appendChild(viewBtn);
        previewDiv.appendChild(removeBtn);
      }
    }
  </script>

</body>
</html>